<mat-card class="meus-dados-card">
    <mat-card-header class="meus-dados-header">
        <mat-card-title class="meus-dados-titulo"> Meus Dados</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <form [formGroup]="form">
            <mat-form-field class="full-width">
                <mat-label>Nome</mat-label>
                <input matInput formControlName="nome">
            </mat-form-field>
            <mat-form-field class="full-width">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email">
            </mat-form-field>
        </form>

        <h3>Endereços</h3>
        <mat-list>
            @for (endereco of user()?.enderecos ?? []; track endereco.id) {
            <div class="item-wrapper">
                <div class="item-text">
                    <mat-list-item [matTooltip]="`
                    ${endereco.rua}, 
                    ${endereco.numero},
                    ${endereco.complemento ? `${endereco.complemento},` : ''}
                    ${endereco.cidade}, 
                    ${endereco.estado},
                    ${endereco.cep}`"
                    [matTooltipPosition]="'above'"
                    >
                        {{endereco.rua}}, {{endereco.numero}}
                        @if(endereco.complemento) { <span>{{endereco.complemento}}</span>}
                        {{endereco.cidade}}, {{endereco.estado}},
                        {{endereco.cep}}
                    </mat-list-item>
                </div>
                <div class="item-action">
                    <button mat-icon-button (click)="editarEndereco(endereco)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button>
                        <mat-icon>delete</mat-icon>
                    </button>

                </div>
            </div>
            }
        </mat-list>
        <button mat-flat-button (click)="cadastrarEndereco()">Adicionar Endereço</button>

        <h3>Telefones</h3>
        <mat-list>
            @for (telefone of user()?.telefones ?? []; track telefone.numero) {
            <div class="item-wrapper">
                <div class="item-text">
                    <mat-list-item>{{telefone.ddd}} {{telefone.numero}}</mat-list-item>
                </div>
                <div class="item-action">
                    <button mat-icon-button (click)="editarTelefone(telefone)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button>
                        <mat-icon>delete</mat-icon>
                    </button>

                </div>
            </div>
            }
        </mat-list>

        <button mat-flat-button (click)="cadastrarTelefone()">Adicionar Telefone</button>
    </mat-card-content>
</mat-card>